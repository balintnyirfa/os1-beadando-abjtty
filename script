#!/bin/bash
collection=()

function collection_add(){
	echo -n "Add meg az előadót: "
	read ARTIST
	#ARTIST=$(artist '+%a')
	echo -n "Add meg az albumot: "
	read ALBUM
	#album=$ALBUM
	echo -n "Add meg a formátumot (CD/vinyl/kazetta/digitális): "
	read FORMAT
	#format=$FORMAT

	#declare -a collection=("Lady Gaga" "Chromatica" "CD")
	collection=("$ARTIST" "$ALBUM" "$FORMAT")

	echo "Ez lett hozzáadva a gyűjteményedhez:"
	printf "\tElőadó: %s\n\tAlbum: %s\n\tFormátum: %s\n" "${collection[@]}"

	collection_write_to_txt
	echo "Sikeres fájlba íratás!"
}

function collection_view(){
	for i in "${collection[@]}"
	do
		echo "Előadó: %s Album: %s Formátum: %s\n" "${collection[@]}"
	done
}

function collection_from_file(){
	filename='collection.txt'
	while read line;
	do
		echo $line
	done < $filename
}

function collection_write_to_txt(){
	printf "%s\t%s\t%s\n" "${collection[@]}" >>collection.txt
	#for i in "${collection[@]}"
	#do
	#	echo $i
	#done >>collection.txt
}



while getopts :awf opt
do
	case $opt in
		a)
			collection_add
			;;
		w)
			collection_from_file
			;;
		f)
			echo -n "Milyen szűrést szeretnél elvégezni?\n\t[1] - Hány darab CD/vinyl/kazetta van a gyűjteményedben?\n\t[2] - Hány darab albumod van ugyanattól az eladótól?"
			read opt
			case $opt
				opt
		?)
			echo "Nem kezelt opció: $OPTARG"
			exit
	esac
done
